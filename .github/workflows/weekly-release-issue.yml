name: Weekly Release Issue

on:
  schedule:
    # Runs every Monday at 4:00 AM UTC (7:00 AM Moscow time, UTC+3)
    - cron: '0 4 * * 1'
  workflow_dispatch: # Allows manual triggering for testing

permissions:
  issues: write

jobs:
  create-release-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create weekly release issue
        uses: actions/github-script@v7
        with:
          script: |
            const title = 'Release a new version of ydb-embedded-ui';
            const body = `## Release Checklist

            - [ ] **Launch a new version release of ydb-embedded-ui on GitHub:**
               - The release is built by the ydb-platform-bot
               - Find its pull request
               - Review the release notes (make changes in the same branch if necessary)
               - Approve and merge the PR
               - After merging, the new library version will be automatically published to npm

            - [ ] **Update yandex ydb-embedded-ui**
            `;

            await github.rest.issues.create({
              owner: context.repo.owner,
              repo: context.repo.repo,
              title: title,
              body: body,
              labels: ['area/duty', 'size/m']
            });
