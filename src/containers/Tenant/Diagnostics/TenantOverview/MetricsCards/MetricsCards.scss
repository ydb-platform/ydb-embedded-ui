// Mixins for pseudo-element patterns

@mixin pseudo-base($side: left, $height: var(--tab-filler-size)) {
    position: absolute;
    top: 100%;
    #{$side}: 0;
    width: var(--tab-filler-size);
    height: $height;

    content: '';

    background-color: var(--g-color-base-background);
}

@mixin pseudo-active-filler($side: left) {
    @include pseudo-base($side, var(--g-spacing-3));
    border-#{$side}: var(--tab-border-width) solid var(--g-color-line-generic);
}

@mixin pseudo-inactive-filler($side: left) {
    border-top: var(--tab-border-width) solid var(--g-color-line-generic);
    @include pseudo-base($side, var(--tab-filler-size));
    border-#{$side}: var(--tab-border-width) solid var(--g-color-line-generic);
    border-top-#{$side}-radius: var(--g-border-radius-s);
}

@mixin pseudo-background-fill($side: left) {
    @include pseudo-base($side, var(--tab-filler-size));
}

.tenant-metrics-cards {
    // CSS Variables for consistent design system
    --tab-border-width: 1px;
    --tab-filler-size: 10px;
    --tab-overlap: -1px;
    --tab-lift-offset: -6px;
    --tab-border-compensation: 1px;
    --tab-adjusted-spacing: calc(var(--g-spacing-3) - var(--tab-border-width));
    --z-tab-base: 100;
    --z-tab-active: 102;
    --g-border-radius-xxl: 12px;

    &__link {
        text-decoration: none;

        color: inherit;

        &:hover {
            text-decoration: none;
        }
    }

    &__link-container {
        position: relative;
        z-index: var(--z-tab-base);

        flex: 1;

        margin-left: var(--tab-overlap);
        padding: 0 var(--g-spacing-3) var(--g-spacing-3) var(--g-spacing-3);

        border-top: var(--tab-border-width) solid var(--g-color-base-background);
        border-bottom: var(--tab-border-width) solid var(--g-color-line-generic);
        background: var(--g-color-base-background);
    }

    // Filler for the first and last cards
    // As they dont have left and right neighbors
    &__link-container:first-child {
        margin-left: 0;

        &.tenant-metrics-cards__link-container_active::after {
            @include pseudo-active-filler(left);
        }

        &:not(.tenant-metrics-cards__link-container_active)::after {
            @include pseudo-inactive-filler(left);
        }

        &:not(.tenant-metrics-cards__link-container_active)::before {
            @include pseudo-background-fill(left);
        }
    }

    &__link-container:last-child {
        margin-right: 0;

        &.tenant-metrics-cards__link-container_active::after {
            @include pseudo-active-filler(right);
        }

        &:not(.tenant-metrics-cards__link-container_active)::after {
            @include pseudo-inactive-filler(right);
        }

        &:not(.tenant-metrics-cards__link-container_active)::before {
            @include pseudo-background-fill(right);
        }
    }

    &__link {
        display: block;

        border: var(--tab-border-width) solid var(--g-color-base-background);
        border-bottom: none;
        border-radius: var(--g-border-radius-s) var(--g-border-radius-s) 0 0;
    }

    &__link-container_active &__link {
        display: block;

        padding-bottom: var(--tab-border-compensation);

        border: var(--tab-border-width) solid var(--g-color-line-generic);
        border-bottom: none;
        border-radius: var(--g-border-radius-s) var(--g-border-radius-s) 0 0;
    }

    &__link-container_active {
        z-index: var(--z-tab-active);

        padding: 0;

        border-bottom: 0 !important;
        background: var(--g-color-base-background);

        transform: translateY(var(--tab-lift-offset));
    }

    &__link-container:first-child {
        padding-left: 0;
    }

    &__link-container:last-child {
        padding-right: 0;
    }

    &__link-container:not(:has(+ &__link-container_active)) {
        padding-right: 0;
    }

    &__link-container:has(+ &__link-container_active) {
        padding-right: var(--tab-adjusted-spacing);

        border-right: var(--tab-border-width) solid var(--g-color-line-generic);
        border-bottom-right-radius: var(--g-border-radius-xxl);
    }

    &__link-container_active + &__link-container {
        padding-left: var(--tab-adjusted-spacing);

        border-left: var(--tab-border-width) solid var(--g-color-line-generic);
        border-bottom-left-radius: var(--g-border-radius-xxl);
    }
}
