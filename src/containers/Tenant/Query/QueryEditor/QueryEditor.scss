@use '../../../../styles/mixins.scss';

.query-editor {
    position: relative;

    display: flex;
    flex: 1 1 auto;
    flex-direction: column;

    height: 100%;

    @include mixins.query-data-table;

    & .data-table__box .data-table__table-wrapper {
        padding-bottom: 0;
    }

    &__editor-tabs {
        display: flex;
        justify-content: space-between;
        align-items: center;

        width: 100%;
        height: 32px;
        padding: 0;

        // Override UIKit Tabs to match Figma: 32px height, 3px gaps, filled backgrounds.
        // Tab internals are from @gravity-ui/uikit (`TabList`/`Tab`).
        .g-tab-list {
            overflow: hidden;
            flex-wrap: nowrap;
            align-items: center;

            box-shadow: none;
        }

        .g-tab-list {
            --g-tabs-item-height: 32px;
            --g-tabs-item-gap: 3px;
            --g-tabs-item-border-width: 0px;
        }

        .g-tab {
            min-width: 90px;
            max-width: 200px;

            border-block-end: 0;
            border-radius: var(--g-border-radius-xs) var(--g-border-radius-xs) 0 0;
            background-color: var(--g-color-base-generic-medium-hover);
        }

        .g-tab:hover {
            background-color: var(--g-color-base-generic-hover);
        }

        .g-tab_active,
        .g-tab_active:hover {
            background-color: var(--g-color-base-generic);
        }

        .g-tab__content {
            height: 100%;
            padding: 2px 16px;

            border-radius: 0;
        }

        .g-tab__title {
            display: flex;
            align-items: center;

            min-width: 0;

            font-family: var(--g-text-caption-font-family);
            font-size: var(--g-text-caption-2-font-size);
            font-weight: var(--g-text-caption-font-weight);
            line-height: var(--g-text-caption-2-line-height);

            color: var(--g-color-text-complementary);
        }
    }

    &__editor-tabs-actions {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    &__editor-tab {
        display: flex;
        align-items: center;

        width: 100%;
        max-width: 200px;
    }

    &__editor-tab-title {
        overflow: hidden;
        flex: 1 1 auto;

        min-width: 0;

        white-space: nowrap;
        text-overflow: ellipsis;
    }

    &__editor-tab-actions {
        display: flex;
        flex-shrink: 0;
        align-items: center;
    }

    &__editor-tab-action {
        display: inline-flex;
        justify-content: center;
        align-items: center;

        width: 20px;
        height: 20px;

        cursor: pointer;

        color: var(--g-color-text-secondary);
        border-radius: var(--g-border-radius-xs);

        &:hover {
            background-color: var(--g-color-base-generic-hover);
        }

        &_close {
            margin-right: 2px;
        }
    }

    &__editor-tab-menu-switcher {
        display: inline-flex;
        align-items: center;
    }

    &__editor-tab-indicator {
        display: inline-flex;
        justify-content: center;
        align-items: center;

        width: 8px;
        height: 8px;

        &_dirty {
            border-radius: 50%;
            background-color: var(--g-color-base-info-medium);
        }

        &_loading {
            width: auto;
            height: auto;
        }
    }

    &__monaco {
        position: relative;

        display: flex;
        flex: 1 1 auto;

        width: 100%;
        height: 100%;

        border: 1px solid var(--g-color-line-generic);
    }

    &__monaco-wrapper {
        display: flex;
        flex: 1 1 auto;

        width: 100%;
        min-height: 0;
    }

    &__pane-wrapper {
        z-index: 2;

        display: flex;
        flex-direction: column;

        background-color: var(--g-color-base-background);

        &_top {
            padding: 0 16px;

            border-bottom: 1px solid var(--g-color-line-generic);
        }
    }
}
